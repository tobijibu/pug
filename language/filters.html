<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>Filters | Pug - にほんご。</title><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta property="og:title" content="Filters | Pug - にほんご。"><meta property="og:url"><meta property="og:type" content="article"><link rel="icon" href="https://tr.you84815.space/pug/favicon.ico"><link rel="stylesheet" href="../css/main.css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-106478577-1', 'auto');</script></head><body><div id="container"><header><div class="icon"><a class="no-barba" href="https://tr.you84815.space/"><svg width="16" height="16"><rect width="16" height="16" fill="#e0e0e0"></rect></svg></a></div><div class="navi_toggle" onclick="toggleMenu()"><svg id="menu_close" width="24" height="24" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><svg id="menu_open" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></div><div class="title">Pug - <a class="no-barba" href="https://tr.you84815.space/">にほんご。</a></div></header><div class="navi" id="navi"><ul class="menu"><li><a href="../index.html">Home</a></li><li>API<ul id="api"><li><a href="../api/getting-started.html">Getting Started</a></li><li><a href="../api/express-integration.html">Express Integration</a></li><li><a href="../api/reference.html">Reference</a></li><li><a href="../api/migrating-to-pug-2.html">Migrating to Pug 2</a></li></ul></li><li>Language Reference<ul id="language-reference"><li><a href="../language/attributes.html">Attributes</a></li><li><a href="../language/case.html">Case</a></li><li><a href="../language/code.html">Code</a></li><li><a href="../language/comments.html">Comments</a></li><li><a href="../language/conditionals.html">Conditionals</a></li><li><a href="../language/doctype.html">Doctype</a></li><li><a class="active" href="../language/filters.html">Filters</a></li><li><a href="../language/includes.html">Includes</a></li><li><a href="../language/inheritance.html">Inheritance</a></li><li><a href="../language/interpolation.html">Interpolation</a></li><li><a href="../language/iteration.html">Iteration</a></li><li><a href="../language/mixins.html">Mixins</a></li><li><a href="../language/plain-text.html">Plain Text</a></li><li><a href="../language/tags.html">Tags</a></li></ul></li></ul></div><div id="content"><div id="main"><div id="barba-wrapper"><div class="barba-container"><h1>Filters</h1><div id="update_date"><span>更新日: 2018.09.10
</span></div><h2>フィルタ</h2><p>フィルタを使うと、Pugの中で別の言語を使うことができます。
フィルタにはプレーンテキストを入力します。</p><p>フィルタにオプションを渡すには括弧で囲みます。
(ちょうどタグの<a class="no-barba" href="./attributes.html">属性</a>と同じように。)<br><code>:less(ieCompat=false)</code></p><p>全ての<a href="https://www.npmjs.com/browse/keyword/jstransformer" target="_blank" rel="noopener noreferrer">JSTransformerモジュール</a>は
Pugのフィルタとして使うことができます。
人気のフィルタは<code>:babel</code>、<code>:uglify-js</code>、<code>:scss</code>、<code>:markdown-it</code>です。<br>特定のフィルタでサポートされているオプションはJSTransformerのドキュメントを参照してください。</p><p>もし希望のフィルタが見つからない場合は、フィルタをカスタマイズすることができます。</p><p>例えば、もしCoffeeScriptとマークダウン(Markdown-it)を使いたい場合、
最初に下記モジュールがインストールされていることを確認します。</p><pre><code><span class="hljs-meta">$</span><span class="bash"> npm install --save jstransformer-coffee-script</span>
<span class="hljs-meta">$</span><span class="bash"> npm install --save jstransformer-markdown-it</span></code></pre><br><p>すると以下のテンプレートを表示出来るようになります。</p><div class="half"><pre><code>:markdown-it(linkify langPrefix='highlight-')
  # Markdown
 
  Markdown document with http://links.com and
 
  ```js
  var codeBlocks;
  ```
script
  :coffee-script
    console.log 'This is coffee script'</code></pre><pre><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Markdown<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Markdown document with <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://links.com"</span>&gt;</span>http://links.com<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> and<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">pre</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">code</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"highlight-js"</span>&gt;</span>var codeBlocks;
<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'This is coffee script'</span>);
 
  }).call(<span class="hljs-keyword">this</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><br><h4>注意</h4><p><b>フィルタはコンパイル時にレンダリングされます。</b>つまり、動的コンテンツや動的オプションは使えません。</p><p>通常、ブラウザではBrowserifyやWebpack等を通してJSTransformerが利用可能な場合の覗いて、
JSTransformerを使うことはできません。
実際は、Browserifyを使ってフィルタをブラウザ上で利用可能にします。</p><p>サーバでプリコンパイルされたテンプレートは、この制限はありません。</p><br><h2 id="inline-syntax">インライン</h2><p>フィルタの内容が短い場合は、まるでタグのように書くことができます。</p><div class="half"><pre><code>p
  :markdown-it(inline) **BOLD TEXT**
 
p.
  In the midst of a large amount of plain
  text, suddenly a wild #[:markdown-it(inline) *Markdown*]
  appeared.</code></pre><pre><code><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>BOLD TEXT<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>In the midst of a large amount of plain text, suddenly a wild <span class="hljs-tag">&lt;<span class="hljs-name">em</span>&gt;</span>Markdown<span class="hljs-tag">&lt;/<span class="hljs-name">em</span>&gt;</span> appeared.
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre></div><br><h2 id="filtered-includes">インクルード</h2><p><a class="no-barba" href="./includes.html#including-filtered-text">インクルード構文</a>を使って
フィルタを外部ファイルに適用することができます。</p><br><h2 id="nested-filters">ネスト</h2><p>複数のフィルタを1つのブロックに適用することもできます。
単に同じ行に追加するだけです。</p><p>フィルタは逆順に適用されます。
まず初めに、最後に定義したフィルタが適用されます。
続いて最後から2番めに定義したフィルタに渡され、以降同様に処理します。</p><p>以下の例では、<code>babel</code>を処理し、その後<code>cdata-js</code>を処理します。</p><div class="half"><pre><code>script
  :cdata-js:babel(presets=['es2015'])
    const myFunc = () => `This is ES2015 in a CD${'ATA'}`;</code></pre><pre><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"><span class="hljs-comment">//&lt;![CDATA[</span>
<span class="hljs-meta">'use strict'</span>;
 
<span class="hljs-keyword">var</span> myFunc = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myFunc</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">'This is ES2015 in a CD'</span> + <span class="hljs-string">'ATA'</span>;
};
<span class="hljs-comment">//]]&gt;</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><br><p class="note">* 上記コードを試すには下記モジュールをインストールしてください。</p><pre><code><span class="hljs-meta">$</span><span class="bash"> npm install --save jstransformer-cdata</span>
<span class="hljs-meta">$</span><span class="bash"> npm install --save jstransformer-babel</span>
<span class="hljs-meta">$</span><span class="bash"> npm install --save babel-preset-es2015</span></code></pre><br><h2 id="custom-filters">カスタムフィルタ</h2><p><a class="no-barba" href="../api/reference.html#options">フィルタオプション</a>を使って
独自フィルタを追加することができます。</p><div class="half"><div><pre><code>options.filters = {
  <span class="hljs-string">'my-own-filter'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">text, options</span>) </span>{
    <span class="hljs-keyword">if</span> (options.addStart) text = <span class="hljs-string">'Start\n'</span> + text;
    <span class="hljs-keyword">if</span> (options.addEnd)   text = text + <span class="hljs-string">'\nEnd'</span>;
    <span class="hljs-keyword">return</span> text;
  }
};</code></pre><pre><code>p
  :my-own-filter(addStart addEnd)
    Filter
    Body</code></pre></div><pre><code><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  Start
  Filter
  Body
  End
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre></div><br><br><div class="license"><p>&copy; 2017
 pugjs.org Released under the <a href="https://opensource.org/licenses/mit-license.php">MIT license</a></p><p>このコンテンツは<a href="https://pugjs.org/api/getting-started.html">pugドキュメント</a>を翻訳/改変したものです。</p></div></div></div></div></div><footer><span> &copy; <span id="copy_year">2017</span> tobijibu</span></footer></div><noscript id="deferred-styles"><link href="../css/lazy.css" rel="stylesheet"></noscript><script src="../js/main.js" defer></script><script src="https://pugjs.org/js/pug.js"></script><div id="src" hidden></div></body></html>